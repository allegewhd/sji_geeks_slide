<!--
SJI geek Slide

Authors: Haidong wang <wang-haidong3@sji-inc.jp>

URL: http://tproject:7000/sji_geek.html
-->
<!DOCTYPE html>
<html>
<head>
  <title>SJI geek</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->

  <!-- Include syntax highter css and javascript fiels -->
  <link href="sh/styles/shCoreMidnight.css" rel="stylesheet" type="text/css" />
  <link href="sh/styles/shThemeMidnight.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="sh/scripts/shCore.js"></script>
  <script type="text/javascript" src="sh/scripts/shBrushPhp.js"></script>
  <script type="text/javascript" src="sh/scripts/shBrushBash.js"></script>
  <script type="text/javascript" src="sh/scripts/shBrushXml.js"></script>
  <script type="text/javascript" src="sh/scripts/shBrushJScript.js"></script>
  <style>
    .code_font { font-size: 18px !important; }
  </style>

  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="nobackground">
    <article class="flexbox vcenter">
      <span><img src="images/php/logo_php.png" width="700"></span>
    </article>
  </slide>

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/php/php-logo.jpg"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Contents</h2>
    </hgroup>
    <article>
      <ul>
        <li>About me</li>
        <li>Quick Start
          <ul>
            <li>Syntax in 5 minutes</li>
            <li>Runtime Enviroment</li>
            <li>Build web site</li>
          </ul>
        </li>
        <li>Modern PHP
          <ul>
            <li>Advanced OOP</li>
            <li>Database access</li>
            <li>Frameworks</li>
          </ul>
        </li>
        <li>PHP ecosystem
          <ul>
            <li>PSR</li>
            <li>Package management</li>
            <li>Facebook and PHP</li>
          </ul>
        </li>
        <li>The future of PHP</li>
      </ul>
    </article>
  </slide>

  <slide class="segue dark quote nobackground">
    <aside class="gdbar right bottom"><img src="images/php/php-logo.jpg"></aside>
    <article class="flexbox vleft auto-fadein">
      <q>
        そとに発信しましょう<br />
        http://sjitech.github.io
      </q>
      <div class="author">
        Advanced-tech Research Center
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>About me</h2>
    </hgroup>
    <article>
      <ul>
        <li>Another Haidong Wang:)</li>
        <li>Entered SJI group in 1999</li>
        <li>Leave SJI from 2012/05 to 2013/07, develop mobile social games in GREE</li>
        <li>Then, I'm back...
          <ul>
            <li>From 2013/08</li>
            <li>Advanced-tech Research Center</li>
          </ul>
        </li>
        <li>Have lots of Java experience</li>
        <li>Playing with PHP recently</li>
        <li>Vimer, also taking interest in emacs</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Php has a syntax very like C and Java</p>
<!-- <pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [5, 6];"> -->
<pre class="brush: php; class-name: 'code_font'; toolbar: false;">
&lt;?php                   // write php code in &lt;?php ?&gt;
    // one line comment
    /*
        block comment
        write multiple lines comment
    */
    echo "hello world!";   // use ; seperate code

    $hoge = "string var";
    $moo = 3;
    $foo = array(          // variable start with $
        "bar" =&gt; 3,
        "hoge" =&gt; "test",
    );

    function getBar($input) {
        return "hello $input";
    }

    // when source only contains php code, ?&gt; can be omitted
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Data types and operation</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    $int = 100;
    $float = 100.123;
    $enable = true;     // true/false is case incentive
    $user = null;       // null is also case incentive

    $i = 1 + 1;
    $i = 1 - 1;
    $i = 1 * 1;
    $i = 1 / 2;
    $i = 3 % 2;
    $i++;
    $i--;

    $name  = "wang haidong";
    $hello = "hello $name";    // expand $name value
    $hai   = 'hello $name';    // literal $name
    $str = "hello" . " world"; // concat two string,  the reason for method call using -&gt;

    // lots of global method for string
    $substr = substr('abcd', 0, 2); // ab
    $split = explode(',', 'aaa,bbb,ccc');
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>Array is most used object in PHP.</li>
          <li>Php application use array as config file.</li>
        </ul>
        <p><b>Code is data and data is code.</b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Array</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [9];">
    $arr = array(                    // mixed type of key is allowed
        2 =&gt; 4,
        6 =&gt; "string value",
        "strkey" =&gt; array(
            "nest key" =&gt; "nest value",
            9 =&gt; "something",
        ),
        "foo" =&gt; 100.23,
        "bar" =&gt; "hello",         // for convenience, last comma is permitted
    );

    $val = $arr['strkey'];   // get value
    $arr[6] = "new value";   // set value

    // lots of global method
    $keys = array_keys($arr);
    $values = array_values($arr);
    unset($arr['key']);        // delete key

    // from PHP 5.4, can define array like json or python
    $array = [
        "foo" =&gt; "bar",
        "bar" =&gt; "foo",
    ];
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>PHP is developed as script language originally.</li>
          <li>Many compromise exists in PHP for some history reason.</li>
          <li>PHP looks weird from Java or other language programmers perspective.</li>
        </ul>
      </section>
    </aside>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Control structure</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [4,17];">
    if ($foo == 2) {           // auto convert data type then check value
    } else if ($foo === 3) {   // check value and data type, do not auto convert data type
    } elseif ($foo &gt; 4) {   // elseif is OK
    } else {
    }

    do
    {
    } while ($i &lt; 5);

    while ($i &lt; 5) {
    }

    for ($i = 0 ; $i &lt; 5 ;$i++) {
    }

    foreach ($array as $v) {        // iterate through array values
    }

    foreach ($array as $k =&gt; $v) {   // iterate through array keys and values
    }
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Method</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [7,17,18];">
&lt;?php
    function sum($v1, $v2) {             // global method
        return $v1 + $v2;
    }
    $total = sum(1, 2); // $total = 3    // just call global method name

    function get_multi($v1 = 10, $v2) {  // method parameter can have default value
        $v1 += 100;
        $v2 += 200;
        return array($v1, $v2);
    }

    list($ret1, $ret2) = get_multi(1, 2); // $ret1 = 101 / $ret2 = 202

    function foo()
    {
        $numargs = func_num_args();
        $arg_list = func_get_args();     // dynamic method parameter
        for ($i = 0; $i &lt; $numargs; $i++) {
            echo "Argument $i is: " . $arg_list[$i] . "\n";
        }
    }

    foo(1, 2, 3);
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>Starting with PHP 5, the object model was rewritten to allow for better performance and more features.</li>
          <li>From PHP 5.3, namespace was added</li>
        </ul>
      </section>
    </aside>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>OOP</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [5,14,24];">
    interface Person { }
    class Foo {
        public static $count = 0;
        public static function plusOne() {
            return "The count is " . ++self::$count . ".\n";
        }
        public function __construct() { }
    }

    class User extends Foo implements Person {
        protected $name = null;

        public function __construct($name) { // constructor, we'll talk about magic method later(__xxx)
            parent::__construct();
            $this-&gt;name = $name;
        }
        public function hello() {
            printf("%s: Hello!\n", $this-&gt;name);
        }
    }
    $user = new User('Mike');
    $user-&gt;hello();        // call object method by -&gt;
    echo Foo::plusOne();
    echo Foo::$count . "\n";  // weird:)
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Some tips</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [5,14,24];">
    echo "hello world";                 // no line break
    print "hello world";                // no line break

    $name = "sji";
    printf("hello %s\n", $name);        // C style print
    $message = sprintf("hello %s\n", $name);  // create new string

    class MyClass {
        protected $age = 36;
        public $job = "programmer";
    }

    $my = new MyClass;          // () can be omitted
    var_dump($my);              // for debug, with data type information
    print_r($my);               // for debug, for html display, only value

</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Syntax in 5 minutes</h3>
    </hgroup>
    <article class="smaller">
      <p>Some tips</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [5,14,24];">
    $my = 5;

    isset($my);   // true
    isset($unknown); // false

    $foo = array();
    is_null($foo);    // false
    empty($foo);      // true

    define('LOGIN_COUNT', 2);  // constant
    echo LOGIN_COUNT;          // constant accessed without $

    // here doc string
    echo &lt;&lt;&lt;EOM
    PHPとは、HTMLへの埋め込み型プログラミング言語です。&lt;br /&gt;
    正式名称は「PHP: Hypertext Preprocessor」です。&lt;br /&gt;
    PHPは{$purpose}に利用されます。&lt;br /&gt;
    &lt;a href="detail.php"&gt;詳細を読む&lt;a&gt;
    EOM;
</pre>
    </article>
  </slide>




  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Runtime Enviroment</h3>
    </hgroup>
    <article>
      <p>
        <li>Install
          <ul>
            <li>PHP can be installed on any major platform</li>
            <li>Mostly installed with apache as mod_php</li>
            <li>Recently nginx+FastCGI/FPM+php become popular</li>
          </ul>
        </li>
        <li>How to run
<pre class="brush: bash; class-name: 'code_font'; toolbar: false; highlight: [];">
    $ php hoge.php       # run script
    $ php -r "var_dump('hello php');"  # evalutae php code directly
    $ php -l hoge.php    # check syntax
</pre>
        </li>
        <li>Show php info
<pre class="brush: bash; class-name: 'code_font'; toolbar: false; highlight: [];">
    [2013-08-20 20:12] &gt; php -v   # show php.ini content
    PHP 5.3.27-1~dotdeb.0 with Suhosin-Patch (cli) (built: Jul 25 2013 20:17:25)
    Copyright (c) 1997-2013 The PHP Group
    Zend Engine v2.3.0, Copyright (c) 1998-2013 Zend Technologies
    [2013-08-20 20:29] &gt; php -i
    phpinfo()
    PHP Version =&gt; 5.3.27-1~dotdeb.0
    ...
</pre>
        </li>
      </p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Build web site</h3>
    </hgroup>
    <article class="smaller">
      <p>Get HTTP data</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [1,2];">
    echo $_SERVER['REQUEST_METHOD'];        // get server enviroment variables
    echo $_SERVER["HTTP_USER_AGENT"];

    echo $_POST['username'];                // get user input
    echo $_GET['index'];
</pre>
      <p>Cookie and session</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [1,2];">
    $time = $_COOKIE["firstphp"];
    setcookie("firstphp", "value", time()+60*60);

    session_start();
    $_SESSION['syouhin'] = "new_session_value";
    $got = $_SESSION['syouhin'];
    session_destroy();
</pre>
    </article>
  </slide>


  <slide>
    <hgroup>
      <h2>Quick start</h2>
      <h3>Build web site</h3>
    </hgroup>
    <article class="smaller">
      <p>Upload file</p>
<pre class="brush: html; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;form enctype=&quot;multipart/form-data&quot; action = &quot;test_02.php&quot; method = &quot;post&quot; &gt;
        &lt;input type=&quot;file&quot; name=&quot;file_data1&quot;&gt;
        &lt;input type=&quot;submit&quot; name=&quot;Upload&quot; value=&quot;Upload&quot;&gt;
    &lt;/form&gt;
</pre>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [3];">
    $filename = $_FILES["file_data1"]["name"];
    $filesize = $_FILES["file_data1"]["size"];
    $result = @move_uploaded_file( $_FILES["file_data1"]["tmp_name"], $filename); // ignore error
    if ( $result === true ) {
        echo "Upload successfully!";
    }
</pre>
      <p>Interact with html</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: []; html-script: true">
    &lt;html&gt;
    &lt;body&gt;
        Welcome &lt;?php echo $username; ?&gt;!&lt;br /&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</pre>
      <p>There's lots of template libraries, no need to write inline php code in html now.</p>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p><b>As to be compatible with old version of PHP, PHP has lots of recommend best practice instead of standards.</b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>About classloader</h3>
    </hgroup>
    <article class="smaller">
      <p>PHP do not have classloader. Developers make their own implements over and over again.</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php
        // only produce a warning (E_WARNING) and the script will continue
        include 'header.php';
        // produce a fatal error (E_COMPILE_ERROR) and stop the script
        require 'header.php';

        include_once 'foo.php';
        require_once 'foo.php';

        $val = functionFromIncludeFile();
</pre>
      <p>In large projects, dependancy management become impossible when include/require exists in every scripts.</p>
      <p>Then we realize a classloader(or scripts loader) stuff is necessary for PHP</p>
      <ul class="build">
        <li>Remove include/require code from scripts and centerize them to one script.</li>
        <li>Load the above script on application start.(bootstrap is a usual name)</li>
        <li>Make it a best practice and standard.(PSR-0, we'll talk later)</li>
      </ul>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>Learn from Java to make script structure by namespace.</li>
          <li>_ char is legacy problem. Lots of legacy code using _ to avoid duplicated class name.</li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>PSR-0 classloader</h3>
    </hgroup>
    <article class="smaller">
      <p>A recommended classloader implment from PSR-0 documents.</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php

    function autoload($className)
    {
        $className = ltrim($className, '\\');
        $fileName  = '';
        $namespace = '';
        if ($lastNsPos = strripos($className, '\\')) {
            $namespace = substr($className, 0, $lastNsPos);
            $className = substr($className, $lastNsPos + 1);
            $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
        }
        $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

        require $fileName;
    }
</pre>
      <p>Convert namespace(talk later) and _ char into path seperator</p>
<pre class="brush: bash; class-name: 'code_font'; toolbar: false; highlight: [];">
      \namespace\package\Class_Name =&gt;
                /path/to/project/lib/vendor/namespace/package/Class/Name.php
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li>Because / is used in regular expression, namespace use \ as delimiter</li>
        </ul>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Namespace</h3>
    </hgroup>
    <article class="smaller">
      <p>Just like pakage in Java or module in Python</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    // myproject/database/connection.php
    &lt;?php
    namespace MyProject\Database

    class Connection {
        // Handling database connections
    }
</pre>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php
    namespace OtherProject;

    // This holds the MyProject\Database namespace with a Connection class in it
    require &apos;myproject/database/connection.php&apos;;

    // use its fully qualified name
    $connection = new \MyProject\Database\Connection();

    // Import the Connection class
    use MyProject\Database\Connection;
    $connection = new Connection();

    // alias
    use MyProject\Database as MyDatabase;
    $connection = new MyDatabase\Connection();
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p><b>
            When the end of a file is reached, PHP automatically releases all resources
        </b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Magic method</h3>
    </hgroup>
    <article class="smaller">
      <p>Constructors and Destructors</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [5,6,9,10];">
    &lt;?php
    class MyClass  {
        public $prop1 = &quot;I&apos;m a class property!&quot;;

        public function __construct()  {
            echo &apos;The class &quot;&apos;, __CLASS__, &apos;&quot; was initiated!&lt;br /&gt;&apos;;
        }

        public function __destruct() {  // executed on exit of this script
            echo &apos;The class &quot;&apos;, __CLASS__, &apos;&quot; was destroyed.&lt;br /&gt;&apos;;
        }

        public function setProperty($newval)  {
            $this-&gt;prop1 = $newval;
        }

        public function getProperty()  {
            return $this-&gt;prop1 . &quot;&lt;br /&gt;&quot;;
        }
    }

    $obj = new MyClass;
    echo $obj-&gt;getProperty();
    unset($obj);  // Destroy the object
</pre>
    </article>
  </slide>


  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b>
        </b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Magic method</h3>
    </hgroup>
    <article class="smaller">
      <p>ToString</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php
    class MyClass  {
        public $prop1 = &quot;I&apos;m a class property!&quot;;

        public function __toString()  {
            echo &quot;Using the toString method: &quot;;
            return $this-&gt;getProperty();
        }
    }

    $obj = new MyClass;
    echo $obj; // Output the object as a string
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b>
        </b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Magic method</h3>
    </hgroup>
    <article class="smaller">
      <p>Property Overloading</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    class Device {
        public $data = array(); // stores misc. data in an array
        public function  __get($name) {
            if(array_key_exists($name, $this-&gt;data)) { // check if the named key exists in our array
                return $this-&gt;data[$name]; // then return the value from the array
            }
            return null;
        }
        public function  __set($name, $value) {
            $this-&gt;data[$name] = $value; // use the property name as the array key
        }
        public function  __isset($name) {
            return array_key_exists($name, $this-&gt;data);
        }
        public function  __unset($name) {
            unset($this-&gt;data[$name]); // forward the unset() to our array element
        }
        //...
    }

    $device-&gt;user = &apos;Steve&apos;;  // call __set()
    echo $device-&gt;user;  // call __get()
    unset($device-&gt;user);  // call __unset()
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p><b>
            Now, create framework like Java SpringFramework is so easy for PHP.
        </b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Magic method</h3>
    </hgroup>
    <article class="smaller">
      <p>Method Overloading</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    class Device {
        //...
        public function  __call($name, $arguments) {
            // make sure our child object has this method
            if(method_exists($this-&gt;connection, $name)) {
                // forward the call to our child object
                return call_user_func_array(array($this-&gt;connection, $name), $arguments);
            }
            return null;
        }
        //...
    }

    $device = new Device(new Battery(), &apos;iMagic&apos;);
    $device-&gt;iDontExist();
    // __call() forwards this to $device-&gt;connection-&gt;iDontExist()
</pre>
      <p>From PHP 5.3, __callStatic() added</p>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php
    function __autoload($name) {  // global function
        $file = &apos;/some/lib/path/&apos; . $name . &apos;.php&apos;;
        if (is_readable($file)) {
            require_once $file;
        }
    }

    // when refer a class not exist, __autoload is called
    $foo = new Foo();
</pre>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Magic methods</h3>
    </hgroup>
    <article class="smaller">
      <p>There's other magic methods learned from Java</p>
      <ul class="build">
        <li>__clone(): called on the copy of a cloned object after cloning takes place.</li>
        <li>__sleep(): called when the serialize() function is called on the object.</li>
        <li>__wakeup(): called when the unserialize() function is called on the stored object.</li>
        <li>__invoke() (PHP 5.3): called when code tries to use the object as a function.
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    class Device {
        public function __invoke($data) {
            echo $data;
        }
    }
    $device = new Device(new Battery(), &apos;iMagic&apos;);
    $device(&apos;test&apos;); // equiv to $device-&gt;__invoke(&apos;test&apos;)
</pre>
        </li>
        <li>__autoload(): called when a class that doesn’t exist is referenced</li>
      </ul>
    </article>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Error handling</h3>
    </hgroup>
    <article class="smaller">
      <p>Legacy error handler</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [11];">
    &lt;?php
        //error handler function
        function customError($errno, $errstr)
        {
            echo &quot;&lt;b&gt;Error:&lt;/b&gt; [$errno] $errstr&lt;br&gt;&quot;;
            echo &quot;Ending Script&quot;;
            die();
        }

        //set error handler
        set_error_handler(&quot;customError&quot;,E_USER_WARNING);

        //trigger error
        $test=2;
        if ($test&gt;1)
        {
            trigger_error(&quot;Value must be 1 or below&quot;,E_USER_WARNING);
        }
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p>You can define global exception handler like legacy error handler</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php
        function myException($exception)
        {
            echo &quot;Exception: &quot; , $exception-&gt;getMessage();
        }

        set_exception_handler(&apos;myException&apos;);

        throw new Exception(&apos;Uncaught Exception occurred&apos;);
</pre>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Error handling</h3>
    </hgroup>
    <article class="smaller">
      <p>From PHP 5, Exception class was added</p>
      <p>From PHP 5.5, finally keyword was added</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    &lt;?php
    try {
        throw new Exception(&apos;error message&apos;);
    } catch (Exception $e) {
        echo $e-&gt;getMessage(), PHP_EOL;
        echo $e-&gt;getCode(), PHP_EOL; // error code
        echo $e-&gt;getFile(), PHP_EOL; // error source file
        echo $e-&gt;getLine(), PHP_EOL; // error source line number
        echo $e-&gt;getTraceAsString(), PHP_EOL; // error stack trace
    }
</pre>
      <p>You can create own exception class inherited from Exception.</p>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3>Reflection in PHP</h3>
    </hgroup>
    <article class="smaller">
      <p></p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [3];">
    $editor = new Editor(&apos;John Doe&apos;);

    $reflector = new ReflectionClass($editor);
    var_dump($reflector-&gt;getMethods());

    // invoke method
    $publishMethod = $reflector-&gt;getMethod(&apos;publish&apos;);
    $publishMethod-&gt;invoke($editor); // second call to publish()

    // access property
    $editorName = $reflector-&gt;getProperty(&apos;name&apos;);
    $editorName-&gt;setAccessible(true);
    $editorName-&gt;getValue($editor);
    $editorName-&gt;setValue($editor, &apos;Mark Twain&apos;);


    // indirect reflection use
    call_user_func(array($editor, &apos;getEditorName&apos;));

    $methodName = &apos;getEditorName&apos;;
    var_dump($editor-&gt;$methodName());
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Advanced OOP</h2>
      <h3><a href="http://jp1.php.net/manual/en/book.spl.php">SPL(Standard PHP Library)</a></h3>
    </hgroup>
    <article class="smaller">
      <p>C++ STL(Standard Template Library)</p>
      <p>Or Python Standard Library</p>
      <p>From PHP 5, forced on from PHP 5.3</p>
      <p>Avoid to reinvent the wheel</p>
      <ul class="build">
        <li>Data Structures(stack, queue, heap, linklist etc.)</li>
        <li>Iterators(ArrayIterator, RecursiveArrayIterator etc.)</li>
        <li>Extended exception subclasses</li>
        <li>File Handling(Like Java 7 NIO.2)</li>
        <li>Language enhancement(spl_autoload, SplObserver etc.)</li>
      </ul>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Database access</h2>
      <h3>PHP and MySQL</h3>
    </hgroup>
    <article class="smaller">
      <p>traditional mysql API</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    // Connect
    mysql_connect(&apos;localhost&apos;, &apos;username&apos;, &apos;password&apos;)
            or die(&apos;Could not connect: &apos; . mysql_error());

    // Choose a database
    mysql_select_db(&apos;someDatabase&apos;) or die(&apos;Could not select database&apos;);

    // Perform database query
    $query = &quot;SELECT * from someTable&quot;;
    $result = mysql_query($query) or die(&apos;Query failed: &apos; . mysql_error());

    // Filter through rows and echo desired information
    while ($row = mysql_fetch_object($result)) {
        echo $row-&gt;name;
    }
</pre>
      <p>Access mysql db through global functions</p>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>Database access</h2>
      <h3>PHP and MySQL</h3>
    </hgroup>
    <article class="smaller">
      <p>PDO, OOP method like JDBC</p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    $name = &apos;Joe&apos;;

    try {
        $conn = new PDO(&apos;mysql:host=localhost;dbname=myDatabase&apos;, $username, $password);
        $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        // execute sql directly
        $data = $conn-&gt;query(&apos;SELECT * FROM myTable WHERE name = &apos; . $conn-&gt;quote($name));

        // prepared statement, avoid SQL injection
        $stmt = $conn-&gt;prepare(&apos;SELECT * FROM users WHERE username = :username&apos;);
        $data = $stmt-&gt;execute(array(&apos;:username&apos; =&gt; PDO::quote($_GET[&apos;username&apos;])));

        foreach($data as $row) {
            print_r($row);
        }
    } catch(PDOException $e) {
        echo &apos;ERROR: &apos; . $e-&gt;getMessage();
    }
</pre>
    <p>MySQLi is another API for access mysql db, but now PDO is recommended.</p>
    <p>PDO supports 12 different drivers, opposed to MySQLi, which supports MySQL only</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3><a href="http://framework.zend.com/">Zend Framework</a></h3>
    </hgroup>
    <article>
      <iframe data-src="http://framework.zend.com/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>Symfony</h3>
    </hgroup>
    <article>
      <iframe data-src="http://symfony.com/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>Ethna</h3>
    </hgroup>
    <article>
      <p>Created by GREE CTO and used widely in GREE services.</p>
      <p>Inspired by Struts framework</p>
      <iframe data-src="http://ethna.jp/doc/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>CakePHP</h3>
    </hgroup>
    <article>
      <iframe data-src="http://cakephp.org/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>FuelPHP</h3>
    </hgroup>
    <article>
      <iframe data-src="http://fuelphp.com/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>CodeIgniter</h3>
    </hgroup>
    <article>
      <iframe data-src="http://ellislab.com/codeigniter"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>Yii</h3>
    </hgroup>
    <article>
      <iframe data-src="http://www.yiiframework.com/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>Laravel</h3>
    </hgroup>
    <article>
      <p>Inspired by ruby <a href="http://www.sinatrarb.com/">Sinatra</a> framework</p>
      <iframe data-src="http://laravel.com/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Frameworks</h2>
      <h3>Phalcon</h3>
    </hgroup>
    <article>
      <p>an open source web framework for PHP delivered as a C extension</p>
      <iframe data-src="http://www.phalconphp.com/en/"></iframe>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: [];">
    class UserModelTest extends PHPUnit_Framework_TestCase {
        public function testGetUser() {
            $user = new User();
            $currentUser = $user-&gt;getCurrentUser();
            $this-&gt;assertEquals(1, $currentUser-&gt;id);
        }
    }
</pre>
      </section>
    </aside>
    <hgroup>
      <h2>Frameworks</h2>
      <h3><a href="https://github.com/sebastianbergmann/phpunit/">PhpUnit</a></h3>
    </hgroup>
    <article>
      <p>Inspired by JUnit</p>
      <iframe data-src="https://github.com/sebastianbergmann/phpunit/"></iframe>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>PHP ecosystem</h2>
      <h3>PSR(PHP Standards Recommendation)</h3>
    </hgroup>
    <article class="smaller">
      <p><a href="http://www.php-fig.org/">PHP Framework Interop Group(FIG)</a> intends to host a cross-section of the PHP ecosystem</p>
      <p>At the time of this writing, that dialogue(between project representatives) has spawned four PHP Standards Recommendations: PSR-0 to PSR-3.</p>
      <p><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a>: Autoloader Standard</p>
      <ul class="build">
        <li>We use require/include everywhere</li>
        <li>Then PHP 5′s magic __autoload() function was introduced</li>
        <li>PHP 5.1.2 made autoloading even better by introducing spl_autoload(), which allows you to register a chain of autoloading functions with spl_autoload_register().</li>
        <li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md#example-implementation">Example implment</a></li>
      </ul>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>PHP ecosystem</h2>
      <h3>PSR(PHP Standards Recommendation)</h3>
    </hgroup>
    <article class="smaller">
      <p><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md">PSR-1</a>: Basic Coding Standard</p>
      <ul>
        <li>Only use the &lt;?php and &lt;?= tags.</li>
        <li>Only use UTF-8 without BOM for PHP code.</li>
        <li>Separate side-effects</li>
        <li>Enforce PSR-0.</li>
        <li>Class names must be defined in StudlyCaps.</li>
        <li>Class constants must be defined in upper case with underscore separators.</li>
        <li>Method names must be defined in camelCase.</li>
      </ul>
      <p><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PSR-2</a>: Coding Style Guide</p>
      <p><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md">PSR-3</a>: Logger Interface</p>
      <p>Recent frameworks almost implements PSR-0 and PSR-1.</p>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>PHP ecosystem</h2>
      <h3>Package management</h3>
    </hgroup>
    <article class="smaller">
      <p><a href="http://pear.php.net/">PEAR</a> PHP Extension and Application Repository</p>
      <p>Install ethna framework from PEAR</p>
<pre class="brush: bash; class-name: 'code_font'; toolbar: false; highlight: [];">
    $ pear channel-discover pear.ethna.jp
    $ pear install -a ethna/ethna # install with dependencies
    $ pear install ethna/ethna # install withou dependencies
    $ pear upgrade ethna/ethna
</pre>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <ul>
          <li></li>
          <li></li>
        </ul>
        <p><b></b></p>
      </section>
    </aside>
    <hgroup>
      <h2>PHP ecosystem</h2>
      <h3>Package management</h3>
    </hgroup>
    <article class="smaller">
      <p><a href="http://getcomposer.org/">composer</a> Dependency Manager for PHP</p>
      <p>Package management like NodeJS npm or Ruby bundle</p>
      <p>Use json config file</p>
      <p>Declaring dependencies in composer.json</p>
<pre class="brush: js; class-name: 'code_font'; toolbar: false; highlight: [];">
    {
        "require": {
            "monolog/monolog": "1.2.*"
        }
    }
</pre>
      <p>Using Composer in your project folder</p>
<pre class="brush: bash; class-name: 'code_font'; toolbar: false; highlight: [];">
    $ php composer.phar install
    $ composer install
</pre>
      <p>Autoloading</p>
<pre class="brush: bash; class-name: 'code_font'; toolbar: false; highlight: [];">
    require 'vendor/autoload.php';
</pre>
      <p>Almost every modern framework support composer now.</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>PHP ecosystem</h2>
      <h3>Facebook and PHP</h3>
    </hgroup>
    <article class="smaller">
      <p>Facebook is the largest application writed with PHP.</p>
      <p>For performance reason, Facebook developed HipHop and HipHop VM(HHVM)</p>
        <ul>
          <li><a href="https://github.com/facebook/hiphop-php">HipHop</a> is a PHP-to-C++ compiler.</li>
          <li>HHVM is a Virtual Machine like JVM with just-in-time(JIT) compilation.</li>
        </ul>
      <p align="center">
      <img src="images/php/hiphop_trans.png" alt="develop department work photos" title="develop department work photos" width="500">
      </p>
    </article>
  </slide>

  <slide>
    <aside class="note">
      <section>
        <p><b>How to interact with JavaScript and HTML consistently</b></p>
<pre class="brush: php; class-name: 'code_font'; toolbar: false; highlight: []; html-script: true">
    &lt;div class=&quot;entry&quot;&gt;
        &lt;h1&gt;{{title}}&lt;/h1&gt;
        &lt;div class=&quot;body&quot;&gt;
            {{{body_content}}}
        &lt;/div&gt;
    &lt;/div&gt;
</pre>
      </section>
    </aside>
    <hgroup>
      <h2>The future of PHP</h2>
      <h3></h3>
    </hgroup>
    <article>
      <p>We are living in exciting times.</p>
      <ul class="build">
        <li>Better unicode support? Maybe</li>
        <li>Minor enhancements that mirror other programming languages. Already in progress</li>
        <li>The ecosystem will have less frameworks, more meta-frameworks.</li>
        <li>There will be a plethora of new extensions.Like improvement in Java JNI</li>
        <li>There will be less reliance on the Zend Engine. HipHop and Parrot has great chance</li>
        <li>PHP will adapt.Not just web language, maybe embedded in mobile device?</li>
        <li>Drop some obsolete baggage, keep moving</li>
      </ul>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/php/php-logo.jpg"></aside>
    <hgroup class="auto-fadein">
      <h2>Visit <a href="https://github.com/allegewhd/sji_geeks_slide">this presentation</a> on Github</h2>
      <h3>Or http://tproject:7000/php_world/php_world.html</h3>
    </hgroup>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/php/php-logo.jpg"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>&lt;Thank You!&gt;</h2>
      <p></p>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script type="text/javascript">SyntaxHighlighter.all();</script>
</body>
</html>
